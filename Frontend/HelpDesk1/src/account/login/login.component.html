<div
  class="relative w-full max-w-[450px] mx-auto bg-theme-cardbg dark:bg-themedark-cardbg text-theme-bodycolor dark:text-themedark-bodycolor bg-opacity-85 shadow-none p-6 sm:p-8 sm:pt-4 sm:pb-4 transition-colors duration-300"
  [@routerTransition]
>
  <!-- LOGIN FON ELEMENTLAR -->
  <div class="auth-bg absolute inset-0 z-[-1] pointer-events-none overflow-visible">
    <span
      class="absolute top-[-15vw] right-[-15vw] w-[60vw] h-[60vw] sm:top-[-140px] sm:right-[-160px] sm:w-[350px] sm:h-[350px] block rounded-full bg-gradient-to-br from-primary-500 to-green-400 opacity-4 animate-floating-1"
    ></span>
    <span
      class="absolute top-[15vw] right-[-10vw] w-8 h-8 sm:top-[150px] sm:right-[-150px] sm:w-5 sm:h-5 block rounded-full bg-primary opacity-50 animate-floating-2"
    ></span>
    <span
      class="absolute left-[-10vw] bottom-[15vw] w-8 h-8 sm:left-[-150px] sm:bottom-[150px] sm:w-5 sm:h-5 block rounded-full bg-warning-500 opacity-50 animate-floating-3"
    ></span>
    <span
      class="absolute left-[-15vw] bottom-[-15vw] w-[50vw] h-[50vw] sm:left-[-100px] sm:bottom-[-100px] sm:w-[300px] sm:h-[300px] block rounded-full bg-gradient-to-bl to-violet-600 from-primary-300 opacity-40 animate-floating-4"
    ></span>
  </div>

  <!-- Sarlavha -->
  <h4 class="text-center text-2xl font-medium text-black dark:text-white mb-4">
    {{ 'LogIn' | localize }}
  </h4>

  <!-- LOGIN FORMA -->
  <form novalidate autocomplete="off" #loginForm="ngForm" (ngSubmit)="login()">
    <!-- USERNAME -->
    <div class="mb-4">
      <div class="relative flex items-center">
        <input
          type="text"
          class="form-control w-full pl-4 pr-10 py-2 rounded bg-theme-inputbg dark:bg-themedark-inputbg border border-theme-inputborder dark:border-themedark-inputborder text-theme-bodycolor dark:text-themedark-bodycolor focus:outline-none focus:ring-2 focus:ring-blue-500"
          name="userNameOrEmailAddress"
          [(ngModel)]="authService.authenticateModel.userNameOrEmailAddress"
          [placeholder]="'UserNameOrEmail' | localize"
          required
          maxlength="256"
          #userNameOrEmailAddressModel="ngModel"
          #userNameOrEmailAddressEl
        />
        <span class="absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none">
          <i data-feather="user" class="w-5 h-5 text-gray-400 dark:text-gray-300"></i>
        </span>
      </div>
      <abp-validation-summary
        [control]="userNameOrEmailAddressModel"
        [controlEl]="userNameOrEmailAddressEl"
        class="text-red-600 dark:text-red-500 text-base font-medium mt-2"
      ></abp-validation-summary>
    </div>

    <!-- PASSWORD -->
    <div class="mb-4">
      <div class="relative flex items-center">
        <input
          [type]="showPassword ? 'text' : 'password'"
          class="form-control w-full pl-4 pr-10 py-2 rounded bg-theme-inputbg dark:bg-themedark-inputbg border border-theme-inputborder dark:border-themedark-inputborder text-theme-bodycolor dark:text-themedark-bodycolor focus:outline-none focus:ring-2 focus:ring-blue-500"
          name="password"
          [(ngModel)]="authService.authenticateModel.password"
          [placeholder]="'Password' | localize"
          required
          maxlength="32"
          #passwordModel="ngModel"
          #passwordEl
          (ngModelChange)="checkPasswordText($event)"
        />
        <span class="absolute right-3 top-1/2 -translate-y-1/2 flex items-center">
          @if (hasTextPassword) {
            @if (showPassword) {
              <i
                class="w-5 h-5 text-gray-400 dark:text-gray-300 cursor-pointer"
                (click)="togglePasswordVisibility()"
              >
                <!-- Eye -->
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor"
                  stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-eye">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </i>
            } @else {
              <i
                class="w-5 h-5 text-gray-400 dark:text-gray-300 cursor-pointer"
                (click)="togglePasswordVisibility()"
              >
                <!-- Eye Off -->
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor"
                  stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-eye-off">
                  <path
                    d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24">
                  </path>
                  <line x1="1" y1="1" x2="23" y2="23"></line>
                </svg>
              </i>
            }
          } @else {
            <i class="w-5 h-5 text-gray-400 dark:text-gray-300">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor"
                stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-lock">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
              </svg>
            </i>
          }
        </span>
      </div>
      <abp-validation-summary
        [control]="passwordModel"
        [controlEl]="passwordEl"
        class="text-red-600 dark:text-red-500 text-base font-medium mt-2"
      ></abp-validation-summary>
    </div>

    <!-- REMEMBER ME + REGISTER -->
    <div class="flex justify-between items-center mb-6">
      <div class="flex items-center">
        <input
          type="checkbox"
          id="rememberMe"
          name="rememberMe"
          class="mr-2 text-primary-500 focus:ring-2 focus:ring-blue-500"
          [(ngModel)]="authService.rememberMe"
        />
        <label for="rememberMe" class="text-theme-secondarytextcolor dark:text-themedark-secondarytextcolor">
          {{ 'RememberMe' | localize }}
        </label>
      </div>
      @if (isSelfRegistrationAllowed) {
        <a
          [routerLink]="['../register']"
          class="text-primary-500 hover:text-primary-600 transition-colors duration-200 flex items-center gap-2"
        >
          <i class="fa fa-plus-circle w-5 h-5"></i>
          {{ 'Register' | localize }}
        </a>
      }
    </div>

    <!-- LOGIN BUTTON (CENTERED) -->
    <div class="flex justify-center">
      <button
        type="submit"
        class="btn btn-primary px-6 py-2 rounded bg-primary-500 text-white hover:bg-primary-600 transition flex items-center justify-center gap-2 shadow-2xl"
        [disabled]="!loginForm.form.valid || submitting"
      >
        <i data-feather="log-in" class="w-5 h-5"></i>
        {{ 'LogIn' | localize }}
      </button>
    </div>
  </form>
</div>
